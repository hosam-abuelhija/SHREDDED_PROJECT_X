<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>ShreddedGuitars</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>

 <!-- ======= Header ======= -->
 <header id="header" class="header fixed-top d-flex align-items-center">

  <div class="d-flex align-items-center justify-content-between">
    <a href="dashboard.html" class="logo d-flex align-items-center">
      <img src="../images/shredded_logo-removebg-preview.png" alt="" style="height: 100px !important; max-height: 100px !important;">
    </a>
    <i class="bi bi-list toggle-sidebar-btn"></i>
  </div><!-- End Logo -->

  <nav class="header-nav ms-auto" id="nav">
    
  </nav><!-- End Icons Navigation -->

</header><!-- End Header -->

<!-- ======= Sidebar ======= -->
<aside id="sidebar" class="sidebar">

  <ul class="sidebar-nav" id="sidebar-nav">

    <li class="nav-item">
      <a class="nav-link collapsed" href="dashboard.html">
        <i class="bi bi-grid"></i>
        <span>Dashboard</span>
      </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#charts-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-bar-chart"></i><span>Orders</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="charts-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="allOrders.html">
            <i class="bi bi-circle"></i><span>All Orders</span>
          </a>
        </li>
        <li>
          <a href="trackOrder.html">
            <i class="bi bi-circle"></i><span>Track Order</span>
          </a>
        </li>
      </ul>
    </li>



    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#components-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-menu-button-wide"></i><span>Products</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="components-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="allProducts.html">
            <i class="bi bi-circle"></i><span>All Products</span>
          </a>
        </li>
        <li>
          <a href="addProduct.html">
            <i class="bi bi-circle"></i><span>Add Product</span>
          </a>
        </li>
      </ul>
    </li>

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-journal-text"></i><span>Applications</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="forms-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="SellOrTrade.html">
            <i class="bi bi-circle"></i><span>Sell Or Trade</span>
          </a>
        </li>
        <li>
          <a href="Repairs.html">
            <i class="bi bi-circle"></i><span>Repairs</span>
          </a>
        </li>
        <li>
          <a href="CustomOrders.html">
            <i class="bi bi-circle"></i><span>Custom Orders</span>
          </a>
        </li>
      </ul>
    </li>
    <li class="nav-item">
      <a class="nav-link collapsed" href="contact.html">
        <i class="bi bi-envelope"></i>
        <span>Contacts</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link collapsed" href="users.html">
        <i class="bi bi-layout-text-window-reverse"></i><span>Users</span>
      </a>
    </li>

   

    <li class="nav-item" id="adminsli" style="display: none;">
      <a class="nav-link collapsed" data-bs-target="#icons-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-gem"></i><span>Admins</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="icons-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="allAdmins.html">
            <i class="bi bi-circle"></i><span>All Admins</span>
          </a>
        </li>
        <li>
          <a href="addAdmin.html">
            <i class="bi bi-circle"></i><span>Add Admin</span>
          </a>
        </li>
      </ul>
    </li>
  </ul>

</aside><!-- End Sidebar-->

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Products</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row">
        <div class="card">
            <div class="card-body">
              <h5 class="card-title">Edit Product</h5>

              <!-- Floating Labels Form -->
              <form class="row g-3" id="productEditForm">
                <!-- Basic Product Information -->
                <div class="col-md-12">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="productName" placeholder="Product Name" required>
                    <label for="productName">Product Name</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="number" class="form-control" id="productPrice" placeholder="Price" required>
                    <label for="productPrice">Price</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="number" class="form-control" id="productDiscount" placeholder="Discount">
                    <label for="productDiscount">Discount</label>
                  </div>
                </div>
              
                <!-- Category Selection -->
                <div class="col-md-4">
                  <div class="form-floating mb-3">
                    <select class="form-select" id="categorySelect" aria-label="Category" required>
                      <option value="" disabled selected>Select Category</option>
                    </select>
                    <label for="categorySelect">Category</label>
                  </div>
                </div>
              
                <!-- Additional Product Information -->
                <div class="col-12">
                  <div class="form-floating">
                    <textarea class="form-control" placeholder="Product description" id="productDescription" style="height: 100px;"></textarea>
                    <label for="productDescription">Product description</label>
                  </div>
                </div>
              
                <div class="col-12">
                  <div class="form-floating">
                    <textarea class="form-control" placeholder="Additional Information" id="additionalInformation" style="height: 100px;"></textarea>
                    <label for="additionalInformation">Additional Information</label>
                  </div>
                </div>
              
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="tags" placeholder="Tags">
                    <label for="tags">Tags</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="includedAccessories" placeholder="Included Accessories">
                    <label for="includedAccessories">Included Accessories</label>
                  </div>
                </div>
              
                <!-- Images (Image1 to Image8) -->
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="image1" placeholder="Image URL 1">
                    <label for="image1">Image URL 1</label>
                  </div>
                </div>
              
                <!-- Product Specifications -->
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="number" class="form-control" id="bodyGrade" placeholder="Body Grade">
                    <label for="bodyGrade">Body Grade</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="number" class="form-control" id="nickGrade" placeholder="Nick Grade">
                    <label for="nickGrade">Nick Grade</label>
                  </div>
                </div>
              
                <!-- Technical Specifications -->
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="body" placeholder="Body">
                    <label for="body">Body</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="nick" placeholder="Nick">
                    <label for="nick">Nick</label>
                  </div>
                </div>
              
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="fingerboard" placeholder="Fingerboard">
                    <label for="fingerboard">Fingerboard</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="scale" placeholder="Scale">
                    <label for="scale">Scale</label>
                  </div>
                </div>
              
                <!-- Additional Details -->
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="pickups" placeholder="Pickups">
                    <label for="pickups">Pickups</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="bridge" placeholder="Bridge">
                    <label for="bridge">Bridge</label>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="tuners" placeholder="Tuners">
                    <label for="tuners">Tuners</label>
                  </div>
                </div>
              
                <div class="col-md-6">
                  <div class="form-floating">
                    <input type="url" class="form-control" id="videoUrl" placeholder="Video URL">
                    <label for="videoUrl">Video URL</label>
                  </div>
                </div>
               
              
                <!-- Form Actions -->
                <div class="text-center">
                  <button type="submit" class="btn btn-primary">Submit</button>
                  <button type="reset" class="btn btn-secondary">Reset</button>
                </div>
              </form><!-- End floating Labels Form -->

            </div>
          </div>
      </div>
    </section>

  </main><!-- End #main -->

 <!-- ======= Footer ======= -->
 <footer id="footer" class="footer">
  <div class="copyright">
    &copy; Copyright <strong><span>Shredded</span></strong>. All Rights Reserved
  </div>
 
</footer><!-- End Footer -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<script>
 


    //   categoryId: document.getElementById("categorySelect").value,
    //   name: document.getElementById("productName").value,
    //   price: parseFloat(document.getElementById("productPrice").value),
    //   discount: parseFloat(document.getElementById("productDiscount").value) || 0,
    //   tags: document.getElementById("tags").value,
    //   image1: document.getElementById("image1").value,
    //   description: document.getElementById("productDescription").value,
    //   additionalInformation: document.getElementById("additionalInformation").value,
    //   includedAccessories: document.getElementById("includedAccessories").value,
    //   bodyGrade: parseInt(document.getElementById("bodyGrade").value) || null,
    //   nickGrade: parseInt(document.getElementById("nickGrade").value) || null,
    //   body: document.getElementById("body").value,
    //   nick: document.getElementById("nick").value,
    //   fingerboard: document.getElementById("fingerboard").value,
    //   scale: document.getElementById("scale").value,
    //   pickups: document.getElementById("pickups").value,
    //   bridge: document.getElementById("bridge").value,
    //   tuners: document.getElementById("tuners").value,
    //   videoUrl: document.getElementById("videoUrl").value,
   

    document.addEventListener("DOMContentLoaded", function () {
  const productId = localStorage.getItem("productId");
  loadCategories();
  loadProductData(productId);

  document.getElementById("productEditForm").addEventListener("submit", async function (event) {
    event.preventDefault();
    const updatedData = getFormData();
    await updateProduct(productId, updatedData);
  });
});

async function loadCategories() {
  try {
    const response = await fetch("https://localhost:44384/api/Products/categories");
    const categories = await response.json();
    const categorySelect = document.getElementById("categorySelect");
    categories.forEach(category => {
      const option = document.createElement("option");
      option.value = category.id;
      option.textContent = category.name;
      categorySelect.appendChild(option);
    });
  } catch (error) {
    console.error("Error loading categories:", error);
  }
}

async function loadProductData(productId) {
  try {
    const response = await fetch(`https://localhost:44384/api/Products/${productId}`);
    if (response.ok) {
      const product = await response.json();
      document.getElementById("productName").value = product.name;
      document.getElementById("categorySelect").value = product.categoryId;
      document.getElementById("productPrice").value = product.price;
      document.getElementById("productDiscount").value = product.discount;
      document.getElementById("tags").value = product.tags;
      document.getElementById("image1").value = product.image1;
      document.getElementById("productDescription").value = product.description;
      document.getElementById("additionalInformation").value = product.additionalInformation;
      document.getElementById("includedAccessories").value = product.includedAccessories;
      document.getElementById("bodyGrade").value = product.bodyGrade;
      document.getElementById("nickGrade").value  = product.nickGrade;
      document.getElementById("body").value = product.body;
      document.getElementById("nick").value = product.nick;
      document.getElementById("fingerboard").value = product.fingerboard;
      document.getElementById("scale").value = product.scale;
      document.getElementById("pickups").value = product.pickups;
      document.getElementById("bridge").value = product.bridge;
      document.getElementById("tuners").value = product.tuners;
      document.getElementById("videoUrl").value = product.videoUrl;
    } else {
      alert("Error loading product data.");
    }
  } catch (error) {
    console.error("Error loading product data:", error);
  }
}

async function updateProduct(productId, updatedData) {
    debugger
  try {
    const response = await fetch(`https://localhost:44384/api/Products/${productId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(updatedData)
    });

    if (response.ok) {
      alert("Product updated successfully!");
      window.location.href= "allProducts.html"
    } else {
      alert("Error updating product.");
    }
  } catch (error) {
    console.error("Error updating product:", error);
  }
}

function getFormData() {
  return {
      categoryId: parseInt(document.getElementById("categorySelect").value),
      name: document.getElementById("productName").value,
      price: parseFloat(document.getElementById("productPrice").value),
      discount: parseFloat(document.getElementById("productDiscount").value) || 0,
      tags: document.getElementById("tags").value,
      image1: document.getElementById("image1").value,
      description: document.getElementById("productDescription").value,
      additionalInformation: document.getElementById("additionalInformation").value,
      includedAccessories: document.getElementById("includedAccessories").value,
      bodyGrade: parseInt(document.getElementById("bodyGrade").value) || null,
      nickGrade: parseInt(document.getElementById("nickGrade").value) || null,
      body: document.getElementById("body").value,
      nick: document.getElementById("nick").value,
      fingerboard: document.getElementById("fingerboard").value,
      scale: document.getElementById("scale").value,
      pickups: document.getElementById("pickups").value,
      bridge: document.getElementById("bridge").value,
      tuners: document.getElementById("tuners").value,
      videoUrl: document.getElementById("videoUrl").value,
  };
}



</script>
<!-- Vendor JS Files -->
<script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/chart.js/chart.umd.js"></script>
<script src="assets/vendor/echarts/echarts.min.js"></script>
<script src="assets/vendor/quill/quill.js"></script>
<script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
<script src="assets/vendor/tinymce/tinymce.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>
<script src="navAndSideBar.js"></script>
</body>

</html>